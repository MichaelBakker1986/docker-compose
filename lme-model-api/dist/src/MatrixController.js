'use strict';

var cov_2ffz6851wv = function () {
	var path = 'C:\\Users\\michael\\Documents\\lme\\lme-model-api\\src\\MatrixController.js',
	    hash = 'a306cd10611ca367bad3a3b560ca5c61f016d7a1',
	    Function = function () {}.constructor,
	    global = new Function('return this')(),
	    gcv = '__coverage__',
	    coverageData = {
		path: 'C:\\Users\\michael\\Documents\\lme\\lme-model-api\\src\\MatrixController.js',
		statementMap: {
			'0': {
				start: {
					line: 4,
					column: 1
				},
				end: {
					line: 4,
					column: 21
				}
			},
			'1': {
				start: {
					line: 5,
					column: 1
				},
				end: {
					line: 5,
					column: 19
				}
			},
			'2': {
				start: {
					line: 6,
					column: 1
				},
				end: {
					line: 6,
					column: 35
				}
			},
			'3': {
				start: {
					line: 7,
					column: 1
				},
				end: {
					line: 7,
					column: 44
				}
			},
			'4': {
				start: {
					line: 8,
					column: 1
				},
				end: {
					line: 8,
					column: 58
				}
			},
			'5': {
				start: {
					line: 11,
					column: 0
				},
				end: {
					line: 13,
					column: 1
				}
			},
			'6': {
				start: {
					line: 12,
					column: 1
				},
				end: {
					line: 12,
					column: 111
				}
			},
			'7': {
				start: {
					line: 14,
					column: 0
				},
				end: {
					line: 23,
					column: 1
				}
			},
			'8': {
				start: {
					line: 15,
					column: 19
				},
				end: {
					line: 15,
					column: 21
				}
			},
			'9': {
				start: {
					line: 16,
					column: 1
				},
				end: {
					line: 21,
					column: 3
				}
			},
			'10': {
				start: {
					line: 22,
					column: 1
				},
				end: {
					line: 22,
					column: 47
				}
			},
			'11': {
				start: {
					line: 24,
					column: 0
				},
				end: {
					line: 41,
					column: 1
				}
			},
			'12': {
				start: {
					line: 28,
					column: 14
				},
				end: {
					line: 28,
					column: 18
				}
			},
			'13': {
				start: {
					line: 29,
					column: 16
				},
				end: {
					line: 29,
					column: 27
				}
			},
			'14': {
				start: {
					line: 30,
					column: 1
				},
				end: {
					line: 40,
					column: 3
				}
			},
			'15': {
				start: {
					line: 32,
					column: 2
				},
				end: {
					line: 32,
					column: 29
				}
			},
			'16': {
				start: {
					line: 33,
					column: 2
				},
				end: {
					line: 33,
					column: 38
				}
			},
			'17': {
				start: {
					line: 34,
					column: 2
				},
				end: {
					line: 37,
					column: 4
				}
			},
			'18': {
				start: {
					line: 35,
					column: 3
				},
				end: {
					line: 35,
					column: 71
				}
			},
			'19': {
				start: {
					line: 36,
					column: 3
				},
				end: {
					line: 36,
					column: 33
				}
			},
			'20': {
				start: {
					line: 39,
					column: 2
				},
				end: {
					line: 39,
					column: 62
				}
			}
		},
		fnMap: {
			'0': {
				name: 'MatrixController',
				decl: {
					start: {
						line: 3,
						column: 9
					},
					end: {
						line: 3,
						column: 25
					}
				},
				loc: {
					start: {
						line: 3,
						column: 62
					},
					end: {
						line: 9,
						column: 1
					}
				},
				line: 3
			},
			'1': {
				name: '(anonymous_1)',
				decl: {
					start: {
						line: 11,
						column: 56
					},
					end: {
						line: 11,
						column: 57
					}
				},
				loc: {
					start: {
						line: 11,
						column: 110
					},
					end: {
						line: 13,
						column: 1
					}
				},
				line: 11
			},
			'2': {
				name: '(anonymous_2)',
				decl: {
					start: {
						line: 14,
						column: 37
					},
					end: {
						line: 14,
						column: 38
					}
				},
				loc: {
					start: {
						line: 14,
						column: 48
					},
					end: {
						line: 23,
						column: 1
					}
				},
				line: 14
			},
			'3': {
				name: '(anonymous_3)',
				decl: {
					start: {
						line: 24,
						column: 42
					},
					end: {
						line: 24,
						column: 43
					}
				},
				loc: {
					start: {
						line: 24,
						column: 63
					},
					end: {
						line: 41,
						column: 1
					}
				},
				line: 24
			},
			'4': {
				name: '(anonymous_4)',
				decl: {
					start: {
						line: 30,
						column: 38
					},
					end: {
						line: 30,
						column: 39
					}
				},
				loc: {
					start: {
						line: 30,
						column: 53
					},
					end: {
						line: 38,
						column: 2
					}
				},
				line: 30
			},
			'5': {
				name: '(anonymous_5)',
				decl: {
					start: {
						line: 34,
						column: 16
					},
					end: {
						line: 34,
						column: 17
					}
				},
				loc: {
					start: {
						line: 34,
						column: 27
					},
					end: {
						line: 37,
						column: 3
					}
				},
				line: 34
			},
			'6': {
				name: '(anonymous_6)',
				decl: {
					start: {
						line: 38,
						column: 9
					},
					end: {
						line: 38,
						column: 10
					}
				},
				loc: {
					start: {
						line: 38,
						column: 23
					},
					end: {
						line: 40,
						column: 2
					}
				},
				line: 38
			}
		},
		branchMap: {},
		s: {
			'0': 0,
			'1': 0,
			'2': 0,
			'3': 0,
			'4': 0,
			'5': 0,
			'6': 0,
			'7': 0,
			'8': 0,
			'9': 0,
			'10': 0,
			'11': 0,
			'12': 0,
			'13': 0,
			'14': 0,
			'15': 0,
			'16': 0,
			'17': 0,
			'18': 0,
			'19': 0,
			'20': 0
		},
		f: {
			'0': 0,
			'1': 0,
			'2': 0,
			'3': 0,
			'4': 0,
			'5': 0,
			'6': 0
		},
		b: {},
		_coverageSchema: 'd34fc3e6b8297bcde183f5492bcb8fcb36775295'
	},
	    coverage = global[gcv] || (global[gcv] = {});

	if (coverage[path] && coverage[path].hash === hash) {
		return coverage[path];
	}

	coverageData.hash = hash;
	return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.MatrixController = undefined;

var _ace_editor_api = require('./ace_editor_api');

function MatrixController($scope, $http, matrixManager, opts) {
	cov_2ffz6851wv.f[0]++;
	cov_2ffz6851wv.s[0]++;

	this.$scope = $scope;
	cov_2ffz6851wv.s[1]++;
	this.$http = $http;
	cov_2ffz6851wv.s[2]++;
	this.matrixManager = matrixManager;
	cov_2ffz6851wv.s[3]++;
	$scope.matrix_tables = matrixManager.matrix;
	cov_2ffz6851wv.s[4]++;
	this.matrix_editor = new _ace_editor_api.AceEditor('matrix_editor', opts);
}

cov_2ffz6851wv.s[5]++;
MatrixController.prototype.registerEditorToClickNames = function (fflEditor, user_session, register, workbook) {
	cov_2ffz6851wv.f[1]++;
	cov_2ffz6851wv.s[6]++;

	this.matrix_editor.registerEditorToClickNames(this.matrix_editor, fflEditor, user_session, register, workbook);
};
cov_2ffz6851wv.s[7]++;
MatrixController.prototype.refresh = function () {
	cov_2ffz6851wv.f[2]++;

	var annotations = (cov_2ffz6851wv.s[8]++, []);
	cov_2ffz6851wv.s[9]++;
	annotations.push({
		row: 0,
		column: 0,
		text: 'Named tables found in matrix file', // Or the Json reply from the parser
		type: 'info'
	});
	cov_2ffz6851wv.s[10]++;
	this.matrix_editor.setAnnotations(annotations);
};
cov_2ffz6851wv.s[11]++;
MatrixController.prototype.updateMatrix = function (model_name) {
	cov_2ffz6851wv.f[3]++;

	/**
  * Excel file->json via server
  */
	var self = (cov_2ffz6851wv.s[12]++, this);
	var $scope = (cov_2ffz6851wv.s[13]++, this.$scope);
	cov_2ffz6851wv.s[14]++;
	$.getJSON('readExcel/' + model_name, function (data) {
		cov_2ffz6851wv.f[4]++;
		cov_2ffz6851wv.s[15]++;

		//TODO: change to default funtions in the FunctionMap
		global.MATRIX_VALUES = data;
		cov_2ffz6851wv.s[16]++;
		self.matrixManager.setMatrices(data);
		cov_2ffz6851wv.s[17]++;
		$scope.$apply(function () {
			cov_2ffz6851wv.f[5]++;
			cov_2ffz6851wv.s[18]++;

			self.matrix_editor.aceEditor.setValue(self.matrixManager.toFatrix());
			cov_2ffz6851wv.s[19]++;
			self.matrix_editor.scrollTop();
		});
	}).fail(function (err) {
		cov_2ffz6851wv.f[6]++;
		cov_2ffz6851wv.s[20]++;

		console.error('Error reading excel file ' + model_name, err);
	});
};

exports.MatrixController = MatrixController;