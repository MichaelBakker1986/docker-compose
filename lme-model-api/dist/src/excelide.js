'use strict';

var cov_1fila61n0x = function () {
	var path = 'C:\\Users\\michael\\Documents\\lme\\lme-model-api\\src\\excelide.js',
	    hash = 'dd111db6a1379dfa626575577303b6b4e81891ab',
	    Function = function () {}.constructor,
	    global = new Function('return this')(),
	    gcv = '__coverage__',
	    coverageData = {
		path: 'C:\\Users\\michael\\Documents\\lme\\lme-model-api\\src\\excelide.js',
		statementMap: {
			'0': {
				start: {
					line: 6,
					column: 20
				},
				end: {
					line: 6,
					column: 32
				}
			},
			'1': {
				start: {
					line: 7,
					column: 0
				},
				end: {
					line: 7,
					column: 12
				}
			},
			'2': {
				start: {
					line: 8,
					column: 14
				},
				end: {
					line: 8,
					column: 15
				}
			},
			'3': {
				start: {
					line: 11,
					column: 1
				},
				end: {
					line: 14,
					column: 2
				}
			},
			'4': {
				start: {
					line: 12,
					column: 2
				},
				end: {
					line: 12,
					column: 26
				}
			},
			'5': {
				start: {
					line: 13,
					column: 2
				},
				end: {
					line: 13,
					column: 8
				}
			},
			'6': {
				start: {
					line: 15,
					column: 14
				},
				end: {
					line: 15,
					column: 16
				}
			},
			'7': {
				start: {
					line: 17,
					column: 1
				},
				end: {
					line: 35,
					column: 3
				}
			},
			'8': {
				start: {
					line: 19,
					column: 3
				},
				end: {
					line: 21,
					column: 4
				}
			},
			'9': {
				start: {
					line: 20,
					column: 4
				},
				end: {
					line: 20,
					column: 16
				}
			},
			'10': {
				start: {
					line: 22,
					column: 3
				},
				end: {
					line: 28,
					column: 4
				}
			},
			'11': {
				start: {
					line: 23,
					column: 4
				},
				end: {
					line: 23,
					column: 20
				}
			},
			'12': {
				start: {
					line: 24,
					column: 4
				},
				end: {
					line: 24,
					column: 59
				}
			},
			'13': {
				start: {
					line: 25,
					column: 4
				},
				end: {
					line: 27,
					column: 5
				}
			},
			'14': {
				start: {
					line: 26,
					column: 5
				},
				end: {
					line: 26,
					column: 13
				}
			},
			'15': {
				start: {
					line: 29,
					column: 3
				},
				end: {
					line: 29,
					column: 14
				}
			},
			'16': {
				start: {
					line: 32,
					column: 3
				},
				end: {
					line: 32,
					column: 12
				}
			},
			'17': {
				start: {
					line: 33,
					column: 3
				},
				end: {
					line: 33,
					column: 12
				}
			},
			'18': {
				start: {
					line: 40,
					column: 15
				},
				end: {
					line: 44,
					column: 2
				}
			},
			'19': {
				start: {
					line: 47,
					column: 2
				},
				end: {
					line: 47,
					column: 52
				}
			},
			'20': {
				start: {
					line: 51,
					column: 21
				},
				end: {
					line: 51,
					column: 23
				}
			},
			'21': {
				start: {
					line: 52,
					column: 2
				},
				end: {
					line: 58,
					column: 4
				}
			},
			'22': {
				start: {
					line: 53,
					column: 3
				},
				end: {
					line: 55,
					column: 4
				}
			},
			'23': {
				start: {
					line: 54,
					column: 4
				},
				end: {
					line: 54,
					column: 24
				}
			},
			'24': {
				start: {
					line: 56,
					column: 3
				},
				end: {
					line: 56,
					column: 57
				}
			},
			'25': {
				start: {
					line: 57,
					column: 3
				},
				end: {
					line: 57,
					column: 22
				}
			},
			'26': {
				start: {
					line: 60,
					column: 2
				},
				end: {
					line: 67,
					column: 3
				}
			},
			'27': {
				start: {
					line: 61,
					column: 12
				},
				end: {
					line: 61,
					column: 14
				}
			},
			'28': {
				start: {
					line: 62,
					column: 4
				},
				end: {
					line: 64,
					column: 6
				}
			},
			'29': {
				start: {
					line: 63,
					column: 5
				},
				end: {
					line: 63,
					column: 32
				}
			},
			'30': {
				start: {
					line: 65,
					column: 4
				},
				end: {
					line: 65,
					column: 12
				}
			},
			'31': {
				start: {
					line: 68,
					column: 2
				},
				end: {
					line: 71,
					column: 3
				}
			},
			'32': {
				start: {
					line: 74,
					column: 1
				},
				end: {
					line: 80,
					column: 3
				}
			},
			'33': {
				start: {
					line: 81,
					column: 15
				},
				end: {
					line: 81,
					column: 27
				}
			},
			'34': {
				start: {
					line: 82,
					column: 13
				},
				end: {
					line: 82,
					column: 33
				}
			},
			'35': {
				start: {
					line: 83,
					column: 1
				},
				end: {
					line: 85,
					column: 3
				}
			},
			'36': {
				start: {
					line: 84,
					column: 2
				},
				end: {
					line: 84,
					column: 104
				}
			},
			'37': {
				start: {
					line: 86,
					column: 1
				},
				end: {
					line: 95,
					column: 3
				}
			},
			'38': {
				start: {
					line: 87,
					column: 2
				},
				end: {
					line: 87,
					column: 63
				}
			},
			'39': {
				start: {
					line: 88,
					column: 19
				},
				end: {
					line: 88,
					column: 48
				}
			},
			'40': {
				start: {
					line: 89,
					column: 17
				},
				end: {
					line: 89,
					column: 42
				}
			},
			'41': {
				start: {
					line: 90,
					column: 2
				},
				end: {
					line: 90,
					column: 32
				}
			},
			'42': {
				start: {
					line: 91,
					column: 2
				},
				end: {
					line: 91,
					column: 28
				}
			},
			'43': {
				start: {
					line: 93,
					column: 2
				},
				end: {
					line: 93,
					column: 35
				}
			},
			'44': {
				start: {
					line: 96,
					column: 17
				},
				end: {
					line: 96,
					column: 67
				}
			},
			'45': {
				start: {
					line: 97,
					column: 1
				},
				end: {
					line: 97,
					column: 59
				}
			},
			'46': {
				start: {
					line: 98,
					column: 1
				},
				end: {
					line: 98,
					column: 11
				}
			},
			'47': {
				start: {
					line: 101,
					column: 0
				},
				end: {
					line: 108,
					column: 1
				}
			},
			'48': {
				start: {
					line: 102,
					column: 1
				},
				end: {
					line: 102,
					column: 52
				}
			},
			'49': {
				start: {
					line: 104,
					column: 1
				},
				end: {
					line: 107,
					column: 8
				}
			},
			'50': {
				start: {
					line: 106,
					column: 2
				},
				end: {
					line: 106,
					column: 8
				}
			}
		},
		fnMap: {
			'0': {
				name: 'prox',
				decl: {
					start: {
						line: 10,
						column: 9
					},
					end: {
						line: 10,
						column: 13
					}
				},
				loc: {
					start: {
						line: 10,
						column: 34
					},
					end: {
						line: 36,
						column: 1
					}
				},
				line: 10
			},
			'1': {
				name: '(anonymous_1)',
				decl: {
					start: {
						line: 18,
						column: 7
					},
					end: {
						line: 18,
						column: 8
					}
				},
				loc: {
					start: {
						line: 18,
						column: 18
					},
					end: {
						line: 30,
						column: 3
					}
				},
				line: 18
			},
			'2': {
				name: '(anonymous_2)',
				decl: {
					start: {
						line: 31,
						column: 7
					},
					end: {
						line: 31,
						column: 8
					}
				},
				loc: {
					start: {
						line: 31,
						column: 19
					},
					end: {
						line: 34,
						column: 3
					}
				},
				line: 31
			},
			'3': {
				name: 'demo',
				decl: {
					start: {
						line: 38,
						column: 9
					},
					end: {
						line: 38,
						column: 13
					}
				},
				loc: {
					start: {
						line: 38,
						column: 16
					},
					end: {
						line: 99,
						column: 1
					}
				},
				line: 38
			},
			'4': {
				name: 'isNoiseData',
				decl: {
					start: {
						line: 46,
						column: 10
					},
					end: {
						line: 46,
						column: 21
					}
				},
				loc: {
					start: {
						line: 46,
						column: 28
					},
					end: {
						line: 48,
						column: 2
					}
				},
				line: 46
			},
			'5': {
				name: 'parseOpenData',
				decl: {
					start: {
						line: 50,
						column: 10
					},
					end: {
						line: 50,
						column: 23
					}
				},
				loc: {
					start: {
						line: 50,
						column: 34
					},
					end: {
						line: 72,
						column: 2
					}
				},
				line: 50
			},
			'6': {
				name: '(anonymous_6)',
				decl: {
					start: {
						line: 52,
						column: 37
					},
					end: {
						line: 52,
						column: 38
					}
				},
				loc: {
					start: {
						line: 52,
						column: 54
					},
					end: {
						line: 58,
						column: 3
					}
				},
				line: 52
			},
			'7': {
				name: '(anonymous_7)',
				decl: {
					start: {
						line: 60,
						column: 27
					},
					end: {
						line: 60,
						column: 28
					}
				},
				loc: {
					start: {
						line: 60,
						column: 41
					},
					end: {
						line: 66,
						column: 4
					}
				},
				line: 60
			},
			'8': {
				name: '(anonymous_8)',
				decl: {
					start: {
						line: 62,
						column: 19
					},
					end: {
						line: 62,
						column: 20
					}
				},
				loc: {
					start: {
						line: 62,
						column: 43
					},
					end: {
						line: 64,
						column: 5
					}
				},
				line: 62
			},
			'9': {
				name: '(anonymous_9)',
				decl: {
					start: {
						line: 83,
						column: 34
					},
					end: {
						line: 83,
						column: 35
					}
				},
				loc: {
					start: {
						line: 83,
						column: 46
					},
					end: {
						line: 85,
						column: 2
					}
				},
				line: 83
			},
			'10': {
				name: '(anonymous_10)',
				decl: {
					start: {
						line: 86,
						column: 30
					},
					end: {
						line: 86,
						column: 31
					}
				},
				loc: {
					start: {
						line: 86,
						column: 42
					},
					end: {
						line: 95,
						column: 2
					}
				},
				line: 86
			},
			'11': {
				name: '(anonymous_11)',
				decl: {
					start: {
						line: 104,
						column: 12
					},
					end: {
						line: 104,
						column: 13
					}
				},
				loc: {
					start: {
						line: 104,
						column: 23
					},
					end: {
						line: 107,
						column: 2
					}
				},
				line: 104
			}
		},
		branchMap: {
			'0': {
				loc: {
					start: {
						line: 11,
						column: 1
					},
					end: {
						line: 14,
						column: 2
					}
				},
				type: 'if',
				locations: [{
					start: {
						line: 11,
						column: 1
					},
					end: {
						line: 14,
						column: 2
					}
				}, {
					start: {
						line: 11,
						column: 1
					},
					end: {
						line: 14,
						column: 2
					}
				}],
				line: 11
			},
			'1': {
				loc: {
					start: {
						line: 19,
						column: 3
					},
					end: {
						line: 21,
						column: 4
					}
				},
				type: 'if',
				locations: [{
					start: {
						line: 19,
						column: 3
					},
					end: {
						line: 21,
						column: 4
					}
				}, {
					start: {
						line: 19,
						column: 3
					},
					end: {
						line: 21,
						column: 4
					}
				}],
				line: 19
			},
			'2': {
				loc: {
					start: {
						line: 22,
						column: 3
					},
					end: {
						line: 28,
						column: 4
					}
				},
				type: 'if',
				locations: [{
					start: {
						line: 22,
						column: 3
					},
					end: {
						line: 28,
						column: 4
					}
				}, {
					start: {
						line: 22,
						column: 3
					},
					end: {
						line: 28,
						column: 4
					}
				}],
				line: 22
			},
			'3': {
				loc: {
					start: {
						line: 25,
						column: 4
					},
					end: {
						line: 27,
						column: 5
					}
				},
				type: 'if',
				locations: [{
					start: {
						line: 25,
						column: 4
					},
					end: {
						line: 27,
						column: 5
					}
				}, {
					start: {
						line: 25,
						column: 4
					},
					end: {
						line: 27,
						column: 5
					}
				}],
				line: 25
			},
			'4': {
				loc: {
					start: {
						line: 53,
						column: 3
					},
					end: {
						line: 55,
						column: 4
					}
				},
				type: 'if',
				locations: [{
					start: {
						line: 53,
						column: 3
					},
					end: {
						line: 55,
						column: 4
					}
				}, {
					start: {
						line: 53,
						column: 3
					},
					end: {
						line: 55,
						column: 4
					}
				}],
				line: 53
			},
			'5': {
				loc: {
					start: {
						line: 56,
						column: 17
					},
					end: {
						line: 56,
						column: 57
					}
				},
				type: 'binary-expr',
				locations: [{
					start: {
						line: 56,
						column: 17
					},
					end: {
						line: 56,
						column: 45
					}
				}, {
					start: {
						line: 56,
						column: 49
					},
					end: {
						line: 56,
						column: 57
					}
				}],
				line: 56
			},
			'6': {
				loc: {
					start: {
						line: 84,
						column: 66
					},
					end: {
						line: 84,
						column: 86
					}
				},
				type: 'binary-expr',
				locations: [{
					start: {
						line: 84,
						column: 66
					},
					end: {
						line: 84,
						column: 73
					}
				}, {
					start: {
						line: 84,
						column: 77
					},
					end: {
						line: 84,
						column: 86
					}
				}],
				line: 84
			},
			'7': {
				loc: {
					start: {
						line: 96,
						column: 17
					},
					end: {
						line: 96,
						column: 67
					}
				},
				type: 'binary-expr',
				locations: [{
					start: {
						line: 96,
						column: 17
					},
					end: {
						line: 96,
						column: 58
					}
				}, {
					start: {
						line: 96,
						column: 62
					},
					end: {
						line: 96,
						column: 67
					}
				}],
				line: 96
			},
			'8': {
				loc: {
					start: {
						line: 101,
						column: 0
					},
					end: {
						line: 108,
						column: 1
					}
				},
				type: 'if',
				locations: [{
					start: {
						line: 101,
						column: 0
					},
					end: {
						line: 108,
						column: 1
					}
				}, {
					start: {
						line: 101,
						column: 0
					},
					end: {
						line: 108,
						column: 1
					}
				}],
				line: 101
			}
		},
		s: {
			'0': 0,
			'1': 0,
			'2': 0,
			'3': 0,
			'4': 0,
			'5': 0,
			'6': 0,
			'7': 0,
			'8': 0,
			'9': 0,
			'10': 0,
			'11': 0,
			'12': 0,
			'13': 0,
			'14': 0,
			'15': 0,
			'16': 0,
			'17': 0,
			'18': 0,
			'19': 0,
			'20': 0,
			'21': 0,
			'22': 0,
			'23': 0,
			'24': 0,
			'25': 0,
			'26': 0,
			'27': 0,
			'28': 0,
			'29': 0,
			'30': 0,
			'31': 0,
			'32': 0,
			'33': 0,
			'34': 0,
			'35': 0,
			'36': 0,
			'37': 0,
			'38': 0,
			'39': 0,
			'40': 0,
			'41': 0,
			'42': 0,
			'43': 0,
			'44': 0,
			'45': 0,
			'46': 0,
			'47': 0,
			'48': 0,
			'49': 0,
			'50': 0
		},
		f: {
			'0': 0,
			'1': 0,
			'2': 0,
			'3': 0,
			'4': 0,
			'5': 0,
			'6': 0,
			'7': 0,
			'8': 0,
			'9': 0,
			'10': 0,
			'11': 0
		},
		b: {
			'0': [0, 0],
			'1': [0, 0],
			'2': [0, 0],
			'3': [0, 0],
			'4': [0, 0],
			'5': [0, 0],
			'6': [0, 0],
			'7': [0, 0],
			'8': [0, 0]
		},
		_coverageSchema: 'd34fc3e6b8297bcde183f5492bcb8fcb36775295'
	},
	    coverage = global[gcv] || (global[gcv] = {});

	if (coverage[path] && coverage[path].hash === hash) {
		return coverage[path];
	}

	coverageData.hash = hash;
	return coverage[path] = coverageData;
}(); /**
      * UI Canvas part
      */


var _typeof2 = require('babel-runtime/helpers/typeof');

var _typeof3 = _interopRequireDefault(_typeof2);

var _lme = require('./lme');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var modelengine = (cov_1fila61n0x.s[0]++, new _lme.LmeAPI());
cov_1fila61n0x.s[1]++;
DEBUG = true;
var counter = (cov_1fila61n0x.s[2]++, 0);

function prox(row, column, value) {
	cov_1fila61n0x.f[0]++;
	cov_1fila61n0x.s[3]++;

	if (column.name === 'name') {
		cov_1fila61n0x.b[0][0]++;
		cov_1fila61n0x.s[4]++;

		row[column.name] = value;
		cov_1fila61n0x.s[5]++;
		return;
	} else {
		cov_1fila61n0x.b[0][1]++;
	}
	var icount = (cov_1fila61n0x.s[6]++, -1);
	var rval;
	cov_1fila61n0x.s[7]++;
	Object.defineProperty(row, column.name, {
		get: function get() {
			cov_1fila61n0x.f[1]++;
			cov_1fila61n0x.s[8]++;

			if (DEBUG) {
				cov_1fila61n0x.b[1][0]++;
				cov_1fila61n0x.s[9]++;

				return value;
			} else {
				cov_1fila61n0x.b[1][1]++;
			}
			cov_1fila61n0x.s[10]++;
			if (icount !== counter) {
				cov_1fila61n0x.b[2][0]++;
				cov_1fila61n0x.s[11]++;

				icount = counter;
				cov_1fila61n0x.s[12]++;
				rval = modelengine.lme.get(row.name, column.name, 0, 0);
				cov_1fila61n0x.s[13]++;
				if ((typeof rval === 'undefined' ? 'undefined' : (0, _typeof3.default)(rval)) === 'object') {
					cov_1fila61n0x.b[3][0]++;
					cov_1fila61n0x.s[14]++;

					rval = 1;
				} else {
					cov_1fila61n0x.b[3][1]++;
				}
			} else {
				cov_1fila61n0x.b[2][1]++;
			}
			cov_1fila61n0x.s[15]++;
			return rval;
		},
		set: function set(v) {
			cov_1fila61n0x.f[2]++;
			cov_1fila61n0x.s[16]++;

			counter++;
			cov_1fila61n0x.s[17]++;
			value = v;
		}
	});
}

function demo() {
	cov_1fila61n0x.f[3]++;


	var typeMap = (cov_1fila61n0x.s[18]++, {
		'text': 'string',
		'money': 'number',
		'number': 'number'
	});

	function isNoiseData(name) {
		cov_1fila61n0x.f[4]++;
		cov_1fila61n0x.s[19]++;

		return ['choices', 'visible'].indexOf(name) !== -1;
	}

	function parseOpenData(openData) {
		cov_1fila61n0x.f[5]++;

		var data,
		    schema = (cov_1fila61n0x.s[20]++, []);
		cov_1fila61n0x.s[21]++;
		openData.meta.view.columns.forEach(function (column) {
			cov_1fila61n0x.f[6]++;
			cov_1fila61n0x.s[22]++;

			if (isNoiseData(column.name)) {
				cov_1fila61n0x.b[4][0]++;
				cov_1fila61n0x.s[23]++;

				column.hidden = true;
			} else {
				cov_1fila61n0x.b[4][1]++;
			}
			cov_1fila61n0x.s[24]++;
			column.type = (cov_1fila61n0x.b[5][0]++, typeMap[column.dataTypeName]) || (cov_1fila61n0x.b[5][1]++, 'string');
			cov_1fila61n0x.s[25]++;
			schema.push(column);
		});

		cov_1fila61n0x.s[26]++;
		data = openData.data.map(function (row) {
			cov_1fila61n0x.f[7]++;

			var r = (cov_1fila61n0x.s[27]++, {});
			cov_1fila61n0x.s[28]++;
			schema.forEach(function (column, index) {
				cov_1fila61n0x.f[8]++;
				cov_1fila61n0x.s[29]++;

				prox(r, column, row[index]);
			});
			cov_1fila61n0x.s[30]++;
			return r;
		});
		cov_1fila61n0x.s[31]++;
		return {
			data: data,
			schema: schema
		};
	}

	cov_1fila61n0x.s[32]++;
	global.Xgrid = canvasDatagrid({
		tree: true,
		parentNode: document.getElementById('grid'),
		borderDragBehavior: 'move',
		allowMovingSelection: true,
		columnHeaderClickBehavior: 'select'
	});
	var Xgrid = (cov_1fila61n0x.s[33]++, global.Xgrid);
	var xhr = (cov_1fila61n0x.s[34]++, new XMLHttpRequest());
	cov_1fila61n0x.s[35]++;
	xhr.addEventListener('progress', function (e) {
		cov_1fila61n0x.f[9]++;
		cov_1fila61n0x.s[36]++;

		Xgrid.data = [{ status: 'Loading data: ' + e.loaded + ' of ' + ((cov_1fila61n0x.b[6][0]++, e.total) || (cov_1fila61n0x.b[6][1]++, 'unknown')) + ' bytes...' }];
	});
	cov_1fila61n0x.s[37]++;
	xhr.addEventListener('load', function (e) {
		cov_1fila61n0x.f[10]++;
		cov_1fila61n0x.s[38]++;

		Xgrid.data = [{ status: 'Loading data ' + e.loaded + '...' }];
		var returnData = (cov_1fila61n0x.s[39]++, JSON.parse(this.responseText));
		var openData = (cov_1fila61n0x.s[40]++, parseOpenData(returnData));
		cov_1fila61n0x.s[41]++;
		Xgrid.schema = openData.schema;
		cov_1fila61n0x.s[42]++;
		Xgrid.data = openData.data;

		cov_1fila61n0x.s[43]++;
		modelengine.importLME(returnData);
		//modelengine.fixProblemsInImportedSolution();
	});
	var modelName = (cov_1fila61n0x.s[44]++, (cov_1fila61n0x.b[7][0]++, window.location.search.split('model=')[1]) || (cov_1fila61n0x.b[7][1]++, 'V05'));
	cov_1fila61n0x.s[45]++;
	xhr.open('GET', 'resources/' + modelName + '_canvas.json');
	cov_1fila61n0x.s[46]++;
	xhr.send();
}

cov_1fila61n0x.s[47]++;
if (document.addEventListener) {
	cov_1fila61n0x.b[8][0]++;
	cov_1fila61n0x.s[48]++;

	document.addEventListener('DOMContentLoaded', demo);
} else {
	cov_1fila61n0x.b[8][1]++;
	cov_1fila61n0x.s[49]++;

	setTimeout(function () {
		'use strict';

		cov_1fila61n0x.f[11]++;
		cov_1fila61n0x.s[50]++;
		demo();
	}, 500);
}