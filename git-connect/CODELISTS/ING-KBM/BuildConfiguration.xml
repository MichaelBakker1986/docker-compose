<?xml version="1.0" encoding="UTF-8" ?>
<project default="make-zipfile-kbm-all" name="Make_ZipFile">
	<tstamp>
		<format property="ldt" pattern="yyyy-MM-dd_HHmm" locale="en,UK"/>
	</tstamp>
	<!-- =========================================================================== -->
	<!-- ZIP met alle configuraties voor KBM -->
	<target name="make-zipfile-kbm-test" description="Make the ZipFile">
		<mkdir dir="${basedir}/_ZipFile"/>
		<delete>
			<fileset dir="${basedir}/_ZipFile/" includes="**/*.zip"/>
		</delete>
		<antcall target="make-zipfile-default"/>
		<antcall target="make-zipfile-ffl"/>
		<zip destfile="${basedir}/_ZipFile/configurations_ing__${ldt}.zip">
			<fileset dir="${basedir}/_ZipFile/" includes="*KBM_deploy*.zip"/>
		</zip>
	</target>
	<target name="make-zipfile-kbm-all" description="Make the ZipFile">
		<mkdir dir="${basedir}/_ZipFile"/>
		<delete>
			<fileset dir="${basedir}/_ZipFile/" includes="**/*.zip"/>
		</delete>
		<antcall target="make-zipfile-default"/>
		<antcall target="make-zipfile-model"/>
		<zip destfile="${basedir}/_ZipFile/KBM_configurations.zip">
			<fileset dir="${basedir}/_ZipFile/" includes="*KBM_deploy*.zip"/>
		</zip>
	</target>
	<target name="make-zipfile-default" description="Make the ZipFile">
		<mkdir dir="${basedir}/_ZipFile"/>
		<delete>
			<fileset dir="${basedir}/_ZipFile/" includes="**/*.zip"/>
		</delete>
		<!-- === JSON =========================================================================== -->
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_${ldt}_screendefinition.zip">
			<fileset dir="${basedir}/_Project/ScreenDefinitions/" includes="*.screendefinition"/>
		</zip>
		<!-- === RevisieMKB ==================================================================== -->
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_${ldt}_REVISIEMKB.zip">
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/Reports/reports.revisiemkb.frb.xml" />
				<globmapper from="reports.revisiemkb.frb.xml" to="reports.questionnaire-revisiemkb.frb-xml"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/_Project/ReportTemplate/reports.questionnaire-ING.frb.rpt" />
				<globmapper from="reports.questionnaire-ING.frb.rpt" to="reports.questionnaire-revisiemkb.frb-rpt"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/MappingTables/EWSWS-REVISIEMKB.Fmt4Table.xml" />
				<globmapper from="EWSWS-REVISIEMKB.Fmt4Table.xml" to="mappings.EWSWS-REVISIEMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/MappingTables/CRR-REVISIEMKB.Fmt4Table.xml" />
				<globmapper from="CRR-REVISIEMKB.Fmt4Table.xml" to="mappings.CRR-REVISIEMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/MappingTables/OneObligor-REVISIEMKB.Fmt4Table.xml" />
				<globmapper from="OneObligor-REVISIEMKB.Fmt4Table.xml" to="mappings.OneObligor-REVISIEMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/MappingTables/OverdraftMetrics-REVISIEMKB.Fmt4Table.xml" />
				<globmapper from="OverdraftMetrics-REVISIEMKB.Fmt4Table.xml" to="mappings.OverdraftMetrics-REVISIEMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/MappingTables/Collaterals-REVISIEMKB.Fmt4Table.xml" />
				<globmapper from="Collaterals-REVISIEMKB.Fmt4Table.xml" to="mappings.COLLATERALS-REVISIEMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/MappingTables/Covenants-REVISIEMKB.Fmt4Table.xml" />
				<globmapper from="Covenants-REVISIEMKB.Fmt4Table.xml" to="mappings.COVENANTS-REVISIEMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/MappingTables/FiatComment-REVISIEMKB.Fmt4Table.xml" />
				<globmapper from="FiatComment-REVISIEMKB.Fmt4Table.xml" to="mappings.FiatComment-REVISIEMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/MappingTables/LOANARRANGEMENTS-REVISIEMKB.Fmt4Table.xml" />
				<globmapper from="LOANARRANGEMENTS-REVISIEMKB.Fmt4Table.xml" to="mappings.LOANARRANGEMENTS-REVISIEMKB.mapping"/>
			</mappedresources>
		</zip>
		<!-- INGVERSLAG =========================================================================== -->
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_${ldt}_INGVERSLAG.zip">
			<mappedresources>
				<zipfileset file="${basedir}/INGVERSLAG/Reports/reports.ingverslag.frb.xml"/>
				<globmapper from="reports.ingverslag.frb.xml" to="reports.questionnaire-ingverslag.frb-xml"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/_Project/ReportTemplate/reports.questionnaire-ING.frb.rpt"/>
				<globmapper from="reports.questionnaire-ING.frb.rpt" to="reports.questionnaire-ingverslag.frb-rpt"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGVERSLAG/MappingTables/EWSWS-INGVerslag.Fmt4Table.xml"/>
				<globmapper from="EWSWS-INGVerslag.Fmt4Table.xml" to="mappings.EWSWS-INGVERSLAG.mapping"/>
			</mappedresources>
		</zip>
		<!-- reports definitions =========================================================================== -->
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_${ldt}_GENERIC_REPORT.zip">
			<fileset dir="${basedir}/_Project/ReportDefinition" includes="reports.definitions.config"/>
		</zip>
		<!-- Translations =========================================================================== -->
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_TRANSLATIONS_${ldt}.zip">
			<mappedresources>
				<fileset file="${basedir}/../Finan/V05_FinanOnline/_Project/translations.ff_prognose_translations.csv"/>
				<globmapper from="translations.ff_prognose_translations.csv" to="translations.finan_financials.translation"/>
			</mappedresources>
			<mappedresources>
        <fileset file="${basedir}/../Finan/V05_FinanOnline/_Project/translations.*" />
        <globmapper from="translations.V05.csv" to="translations.V05.translation" />
      </mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/_Project/Translations/ING_translations.translation.csv"/>
				<globmapper from="ING_translations.translation.csv" to="translations.ing_translations.translation"/>
			</mappedresources>
		</zip>
		<!-- INGSGG3 =========================================================================== -->
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_${ldt}_INGSCG3.zip">
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/Matrices/G3_Parameters.xls"/>
				<globmapper from="G3_Parameters.xls" to="matrices.G3_Parameters.xls.matrix"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/Matrices/G3_Sector.xls"/>
				<globmapper from="G3_Sector.xls" to="matrices.G3_Sector.xls.matrix"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/Reports/reports.ingscg3.frb.xml"/>
				<globmapper from="reports.ingscg3.frb.xml" to="reports.questionnaire-ingscg3.frb-xml"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/_Project/ReportTemplate/reports.questionnaire-ING.frb.rpt"/>
				<globmapper from="reports.questionnaire-ING.frb.rpt" to="reports.questionnaire-ingscg3.frb-rpt"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/MappingTables/CRR-INGSCG3.Fmt4Table.xml"/>
				<globmapper from="CRR-INGSCG3.Fmt4Table.xml" to="mappings.CRR-INGSCG3.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/MappingTables/Naics-INGSCG3.Fmt4Table.xml"/>
				<globmapper from="Naics-INGSCG3.Fmt4Table.xml" to="mappings.NAICS-INGSCG3.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/MappingTables/IFRS-INGSCG3.Fmt4Table.xml"/>
				<globmapper from="IFRS-INGSCG3.Fmt4Table.xml" to="mappings.IFRS-INGSCG3.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/MappingTables/PartyRegistration-INGSCG3.Fmt4Table.xml"/>
				<globmapper from="PartyRegistration-INGSCG3.Fmt4Table.xml" to="mappings.PARTYREGISTRATION-INGSCG3.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/MappingTables/EWSWS-INGSCG3.Fmt4Table.xml"/>
				<globmapper from="EWSWS-INGSCG3.Fmt4Table.xml" to="mappings.EWSWS-INGSCG3.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/MappingTables/HistoricRiskRating-INGSCG3.Fmt4Table.xml"/>
				<globmapper from="HistoricRiskRating-INGSCG3.Fmt4Table.xml" to="mappings.HistoricRiskRating-INGSCG3.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/MappingTables/OverdraftMetrics-INGSCG3.Fmt4Table.xml"/>
				<globmapper from="OverdraftMetrics-INGSCG3.Fmt4Table.xml" to="mappings.OverdraftMetrics-INGSCG3.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/MappingTables/OneObligor-INGSCG3.Fmt4Table.xml"/>
				<globmapper from="OneObligor-INGSCG3.Fmt4Table.xml" to="mappings.OneObligor-INGSCG3.mapping"/>
			</mappedresources>
		</zip>
		<!-- INGSCG3REVMKB =========================================================================== -->
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_${ldt}_INGSCG3REVMKB.zip">
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/Reports/reports.INGSCG3REVMKB.frb.xml"/>
				<globmapper from="reports.INGSCG3REVMKB.frb.xml" to="reports.questionnaire-INGSCG3REVMKB.frb-xml"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/_Project/ReportTemplate/reports.questionnaire-ING.frb.rpt"/>
				<globmapper from="reports.questionnaire-ING.frb.rpt" to="reports.questionnaire-INGSCG3REVMKB.frb-rpt"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/CRR-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="CRR-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.CRR-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/Naics-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="Naics-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.NAICS-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/IFRS-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="IFRS-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.IFRS-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/PartyRegistration-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="PartyRegistration-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.PARTYREGISTRATION-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/EWSWS-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="EWSWS-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.EWSWS-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/HistoricRiskRating-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="HistoricRiskRating-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.HistoricRiskRating-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/OverdraftMetrics-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="OverdraftMetrics-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.OverdraftMetrics-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/Naics-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="Naics-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.NAICS-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/OneObligor-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="OneObligor-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.OneObligor-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/Collaterals-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="Collaterals-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.COLLATERALS-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/Covenants-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="Covenants-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.COVENANTS-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/FiatComment-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="FiatComment-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.FiatComment-INGSCG3REVMKB.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/MappingTables/LOANARRANGEMENTS-INGSCG3REVMKB.Fmt4Table.xml"/>
				<globmapper from="LOANARRANGEMENTS-INGSCG3REVMKB.Fmt4Table.xml" to="mappings.LOANARRANGEMENTS-INGSCG3REVMKB.mapping"/>
			</mappedresources>
		</zip>
		<!-- INGSCG3REVCOV =========================================================================== -->
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_${ldt}_INGSCG3REVCOV.zip">
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVCOV/Reports/reports.ingscg3revcov.frb.xml"/>
				<globmapper from="reports.ingscg3revcov.frb.xml" to="reports.questionnaire-ingscg3revcov.frb-xml"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/_Project/ReportTemplate/reports.questionnaire-ING.frb.rpt"/>
				<globmapper from="reports.questionnaire-ING.frb.rpt" to="reports.questionnaire-ingscg3revcov.frb-rpt"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVCOV/MappingTables/Naics-INGSCG3REVCOV.Fmt4Table.xml"/>
				<globmapper from="Naics-INGSCG3REVCOV.Fmt4Table.xml" to="mappings.NAICS-INGSCG3REVCOV.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVCOV/MappingTables/IFRS-INGSCG3REVCOV.Fmt4Table.xml"/>
				<globmapper from="IFRS-INGSCG3REVCOV.Fmt4Table.xml" to="mappings.IFRS-INGSCG3REVCOV.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVCOV/MappingTables/PartyRegistration-INGSCG3REVCOV.Fmt4Table.xml"/>
				<globmapper from="PartyRegistration-INGSCG3REVCOV.Fmt4Table.xml" to="mappings.PARTYREGISTRATION-INGSCG3REVCOV.mapping"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVCOV/MappingTables/Covenants-INGSCG3REVCOV.Fmt4Table.xml"/>
				<globmapper from="Covenants-INGSCG3REVCOV.Fmt4Table.xml" to="mappings.COVENANTS-INGSCG3REVCOV.mapping"/>
			</mappedresources>
		</zip>
	</target>

	<target name="make-zipfile-ffl" description="Make the ZipFile">
		<zip destfile="${basedir}/_ZipFile/KBM_deploy_${ldt}_ffl.zip">
			<mappedresources>
				<zipfileset file="${basedir}/REVISIEMKB/FFL/REVISIEMKB.FFL"/>
				<globmapper from="REVISIEMKB.FFL" to="ffl.REVISIEMKB.ffl"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGVERSLAG/FFL/INGVERSLAG.FFL"/>
				<globmapper from="INGVERSLAG.FFL" to="ffl.INGVERSLAG.ffl"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3/FFL/INGSCG3.FFL"/>
				<globmapper from="INGSCG3.FFL" to="ffl.INGSCG3.ffl"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVMKB/FFL/INGSCG3REVMKB.FFl"/>
				<globmapper from="INGSCG3REVMKB.FFl" to="ffl.INGSCG3REVMKB.ffl"/>
			</mappedresources>
			<mappedresources>
				<zipfileset file="${basedir}/INGSCG3REVCOV/FFL/INGSCG3REVCOV.FFL"/>
				<globmapper from="INGSCG3REVCOV.FFL" to="ffl.INGSCG3REVCOV.ffl"/>
			</mappedresources>

		</zip>
	</target>
</project>
