Unspec test stories

Meta:
@author Lutske

@skip Fails until pull-request 80 is accepted 
Scenario: Unspec on dataset
Given a document with timeunit MONTH for the historic years 2007,2008 and the forecast years 2009,2010
And the Dataset dataset1
When variable Unspec1Amount1 has value 15000 for the BaseLayer in column 24
When variable Unspec1Amount2 has value 5000 for the BaseLayer in column 24
Then variable Unspec1Total should be 10000 for the BaseLayer in column 24
And variable Unspec1Amount1 should be the value NA for Dataset dataset1 in column 24
And variable Unspec1Amount2 should be the value NA for Dataset dataset1 in column 24

When variable Unspec1Total has value 11000 for Dataset dataset1 in column 24
Then variable Unspec1Amount1 should be the value 16500 for Dataset dataset1 in column 24
And variable Unspec1Amount2 should be the value 5500 for Dataset dataset1 in column 24

And variable Unspec1Total should be 10000 for the BaseLayer in column 24
And variable Unspec1Amount1 should be 15000 for the BaseLayer in column 24
And variable Unspec1Amount2 should be 5000 for the BaseLayer in column 24

Scenario: unspec on virtual column
Given a document with timeunit MONTH for the forecast years 2008,2009

When variable UnspecSubVariable_1 has value 50 for column with month january in year 2009
And variable UnspecSubVariable_2 has value 50 for column with month january in year 2009
Then variable UnspecSubTotal_1 should be 100 for column with month january in year 2009

When variable UnspecSubVariable_1 has value 100 for column with month february in year 2009
And variable UnspecSubVariable_2 has value 100 for column with month february in year 2009
Then variable UnspecSubTotal_1 should be 200 for column with month february in year 2009

When variable UnspecSubVariable_1 has value 200 for column with month march in year 2009
And variable UnspecSubVariable_2 has value 200 for column with month march in year 2009
Then variable UnspecSubTotal_1 should be 400 for column with month march in year 2009
And variable UnspecSubVariable_1 should be the value 350 for virtual column with year 2009
And variable UnspecSubVariable_2 should be the value 350 for virtual column with year 2009
And variable UnspecSubTotal_1 should be the value 700 for virtual column with year 2009

When variable UnspecSubTotal_1 has value 750 for virtual column with year 2009
Then variable UnspecSubVariable_1 should be the value 375 for virtual column with year 2009
And variable UnspecSubVariable_2 should be the value 375 for virtual column with year 2009

When variable UnspecSubTotal_1 has value 800 for virtual column with year 2009
Then variable UnspecSubVariable_1 should be the value 400 for virtual column with year 2009
And variable UnspecSubVariable_2 should be the value 400 for virtual column with year 2009

