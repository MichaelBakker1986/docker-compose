<?xml version="1.0" encoding="UTF-8" ?>
<project default="make-zipfile" name="Make_ZipFile">
  <tstamp>
    <format property="ldt" pattern="yyyy-MM-dd_HHmm" locale="en,UK"/>
  </tstamp>

  <target name="make-zipfile-total" description="Make the ZipFile">
    <mkdir dir="${basedir}/_ZipFile"/>
    <delete>
      <fileset dir="${basedir}/_ZipFile/" includes="**/*.zip"/>
    </delete>
    <antcall target="make-zipfile-ffl"/>
    <antcall target="make-zipfile-parameters"/>
    <antcall target="make-zipfile-xsd"/>
    <antcall target="make-zipfile-translations"/>
    <antcall target="make-zipfile-mappingfiles"/>
    <antcall target="make-zipfile-screendefinitions"/>

    <zip destfile="${basedir}/_ZipFile/configurations_fyndoo_${ldt}.zip">
      <fileset dir="${basedir}/_ZipFile/" includes="*FYNDOO_*.zip" excludes="configurations_fyndoo_*.zip"/>
    </zip>
  </target>

  <target name="make-zipfile" description="Make the ZipFile">
    <antcall target="make-zipfile-reports"/>
    <antcall target="make-zipfile-models"/>
    <antcall target="make-zipfile-parameters"/>
    <antcall target="make-zipfile-xsd"/>
    <antcall target="make-zipfile-translations"/>
    <antcall target="make-zipfile-mappingfiles"/>
    <antcall target="make-zipfile-screendefinitions"/>

    <zip destfile="${basedir}/_ZipFile/FYNDOO_configurations.zip">
      <fileset dir="${basedir}/_ZipFile/" includes="*FYNDOO_*.zip"/>
    </zip>
  </target>

  <target name="make-zipfile-reports" description="Make a ZipFile for reports">
    <zip destfile="${basedir}/_ZipFile/FYNDOO_reports_${ldt}.zip">
      <fileset dir="${basedir}/_Project/reports/definitions" includes="reports.definitions.config"/>
    </zip>
  </target>

  <target name="make-zipfile-models" description="Make a ZipFile for models">
    <zip destfile="${basedir}/_ZipFile/FYNDOO_models_${ldt}.zip">
      <fileset dir="${basedir}/APPROVAL/JAR" includes="models.APPROVAL.model"/>
      <fileset dir="${basedir}/ASSESSMENT2/JAR" includes="models.ASSESSMENT2.model"/>
      <fileset dir="${basedir}/CREDITLETTER/JAR" includes="models.CREDITLETTER.model"/>
      <fileset dir="${basedir}/CREDITPROPOSAL/JAR" includes="models.CREDITPROPOSAL.model"/>
      <fileset dir="${basedir}/CREDITPROPOSALCA/JAR" includes="models.CREDITPROPOSALCA.model"/>
      <fileset dir="${basedir}/CREDITPROPOSALCM/JAR" includes="models.CREDITPROPOSALCM.model"/>
      <fileset dir="${basedir}/CREDITPROPOSALLE/JAR" includes="models.CREDITPROPOSALLE.model"/>
      <fileset dir="${basedir}/FBL/JAR" includes="models.FBL.model"/>
      <fileset dir="${basedir}/IB/JAR" includes="models.IB.model"/>
      <fileset dir="${basedir}/MOTIVATION/JAR" includes="models.MOTIVATION.model"/>
      <fileset dir="${basedir}/PRICING/JAR" includes="models.PRICING.model"/>
      <fileset dir="${basedir}/RATING/JAR" includes="models.RATING.model"/>
      <fileset dir="${basedir}/../fyndoo-sns/CONTRACT/JAR" includes="models.CONTRACT.model"/>
      <fileset dir="${basedir}/../Finan/V05_FinanOnline/JAR" includes="models.V05.model"/>
    </zip>
  </target>

  <target name="make-zipfile-ffl" description="Make a ZipFile for parameters">
    <zip destfile="${basedir}/_ZipFile/FYNDOO_ffl_models_${ldt}.zip" duplicate="preserve">
      <mappedresources>
        <fileset file="${basedir}/APPROVAL/FFL/APPROVAL.FFL"/>
        <globmapper from="APPROVAL.FFL" to="ffl.APPROVAL.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/ASSESSMENT2/FFL/ASSESSMENT2.FFL"/>
        <globmapper from="ASSESSMENT2.FFL" to="ffl.ASSESSMENT2.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/CREDITLETTER/FFL/CREDITLETTER.FFL"/>
        <globmapper from="CREDITLETTER.FFL" to="ffl.CREDITLETTER.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/CREDITPROPOSAL/FFL/CREDITPROPOSAL.FFL"/>
        <globmapper from="CREDITPROPOSAL.FFL" to="ffl.CREDITPROPOSAL.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/CREDITPROPOSALCA/FFL/CREDITPROPOSALCA.FFL"/>
        <globmapper from="CREDITPROPOSALCA.FFL" to="ffl.CREDITPROPOSALCA.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/CREDITPROPOSALCM/FFL/CREDITPROPOSALCM.FFL"/>
        <globmapper from="CREDITPROPOSALCM.FFL" to="ffl.CREDITPROPOSALCM.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/CREDITPROPOSALLE/FFL/CREDITPROPOSALLE.FFL"/>
        <globmapper from="CREDITPROPOSALLE.FFL" to="ffl.CREDITPROPOSALLE.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/FBL/FFL/FBL.FFL"/>
        <globmapper from="FBL.FFL" to="ffl.FBL.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/IB/FFL/IB.FFL"/>
        <globmapper from="IB.FFL" to="ffl.IB.ffl"/>
      </mappedresources>
   	  <mappedresources>
		<fileset file="${basedir}/../Finan/V05_FinanOnline/FFL/V05.FFL" />
		<globmapper from="*" to="ffl.*" />
	  </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/MOTIVATION/FFL/MOTIVATION.FFL"/>
        <globmapper from="MOTIVATION.FFL" to="ffl.MOTIVATION.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/PRICING/FFL/PRICING.FFL"/>
        <globmapper from="PRICING.FFL" to="ffl.PRICING.ffl"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/RATING/FFL/RATING.ffl"/>
        <globmapper from="RATING.ffl" to="ffl.RATING.ffl"/>
      </mappedresources>
    </zip>
  </target>

  <target name="make-zipfile-parameters" description="Make a ZipFile for parameters">
    <zip destfile="${basedir}/_ZipFile/FYNDOO_matrices_${ldt}.zip">
      <fileset dir="${basedir}/CREDITPROPOSAL/Matrices" includes="matrices.*.matrix"/>
      <fileset dir="${basedir}/PRICING/Matrices" includes="matrices.*.matrix"/>
    </zip>
  </target>

  <target name="make-zipfile-xsd" description="Make a ZipFile for xsds">
    <zip destfile="${basedir}/_ZipFile/FYNDOO_xsd_${ldt}.zip">
      <mappedresources>
        <zipfileset file="${basedir}/../../FBL/force-webservices/src/archive/META-INF/wsdl/documentoutput/FBLTotaal.xsd"/>
        <globmapper from="FBLTotaal.xsd" to="xsds.FBLTotaal.xsd"/>
      </mappedresources>
    </zip>
  </target>

  <target name="make-zipfile-translations" description="Make a ZipFile for translations">
    <zip destfile="${basedir}/_ZipFile/FYNDOO_translations_${ldt}.zip">
      <mappedresources>
        <zipfileset file="${basedir}/../../CODELISTS/Finan/V05_FinanOnline/_Project/translations.ff_prognose_translations.csv"/>
        <globmapper from="translations.ff_prognose_translations.csv" to="translations.translations.translation"/>
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/../Finan/V05_FinanOnline/_Project/translations.*" />
        <globmapper from="translations.V05.csv" to="translations.V05.translation" />
      </mappedresources>
      <mappedresources>
        <fileset file="${basedir}/../Finan/V05_FinanOnline/_Project/translations.*" />
        <globmapper from="translations.finanfinancials.csv" to="translations.finanfinancials.translation" />
      </mappedresources>      
      <mappedresources>
        <zipfileset file="${basedir}/_Project/translations/translations.fyndoo.csv"/>
        <globmapper from="translations.fyndoo.csv" to="translations.fyndoo.translation"/>
      </mappedresources>
    </zip>
  </target>

  <target name="make-zipfile-mappingfiles" description="Make a ZipFile for mappingfiles">
    <zip destfile="${basedir}/_ZipFile/FYNDOO_mappingfiles_${ldt}.zip">
      <mappedresources>
        <zipfileset file="${basedir}/CREDITPROPOSAL/MappingTables/CREDITPROPOSAL-CREDITPROPOSAL.Fmt4Table.xml"/>
        <globmapper from="CREDITPROPOSAL-CREDITPROPOSAL.Fmt4Table.xml" to="mappings.CREDITPROPOSAL-CREDITPROPOSAL.mapping"/>
      </mappedresources>
      <mappedresources>
        <zipfileset file="${basedir}/CREDITPROPOSAL/MappingTables/ASSESSMENT2-CREDITPROPOSAL.Fmt4Table.xml"/>
        <globmapper from="ASSESSMENT2-CREDITPROPOSAL.Fmt4Table.xml" to="mappings.ASSESSMENT2-CREDITPROPOSAL.mapping"/>
      </mappedresources>
      <mappedresources>
        <zipfileset file="${basedir}/FBL/MappingTables/FTB-FBL.Fmt4Table.xml"/>
        <globmapper from="FTB-FBL.Fmt4Table.xml" to="mappings.FTB-FBL.mapping"/>
      </mappedresources>
      <mappedresources>
        <zipfileset file="${basedir}/FBL/MappingTables/PRICING-FBL.Fmt4Table.xml"/>
        <globmapper from="PRICING-FBL.Fmt4Table.xml" to="mappings.PRICING-FBL.mapping"/>
      </mappedresources>
      <mappedresources>
        <zipfileset file="${basedir}/IB/MappingTables/BT2016-bank-rpt-ihz-aangifte-2015-IB.Fmt4Table.xml"/>
        <globmapper from="BT2016-bank-rpt-ihz-aangifte-2015-IB.Fmt4Table.xml" to="mappings.BT2016-bank-rpt-ihz-aangifte-2015-IB.mapping"/>
      </mappedresources>
      <mappedresources>
        <zipfileset file="${basedir}/PRICING/MappingTables/AGREEMENTS-PRICING.Fmt4Table.xml"/>
        <globmapper from="AGREEMENTS-PRICING.Fmt4Table.xml" to="mappings.AGREEMENTS-PRICING.mapping"/>
      </mappedresources>
      <mappedresources>
        <zipfileset file="${basedir}/PRICING/MappingTables/RATING-PRICING.Fmt4Table.xml"/>
        <globmapper from="RATING-PRICING.Fmt4Table.xml" to="mappings.RATING-PRICING.mapping"/>
      </mappedresources>
      <mappedresources>
        <zipfileset file="${basedir}/RATING/MappingTables/V05-RATING.Fmt4Table.xml"/>
        <globmapper from="V05-RATING.Fmt4Table.xml" to="mappings.V05-RATING.mapping"/>
      </mappedresources>

      <!-- Finan V05 mappings -->
      <fileset dir="${basedir}/../Finan/V05/FMT/Tables" includes="mappings.*.mapping"/>
    </zip>
  </target>

  <target name="make-zipfile-screendefinitions" description="Make a ZipFile for screen definitions">
    <zip destfile="${basedir}/_ZipFile/FYNDOO_screendefinitions_${ldt}.zip">
      <fileset dir="${basedir}/_Project/screendefinitions" includes="screendefinition.*.screendefinition"/>
    </zip>
  </target>
</project>
